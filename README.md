# Template Structure for a Runway Model

<img src="https://img.shields.io/badge/Runway-Model-1bd18b.svg?style=flat-square&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjEgKDU3NTAxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTEiIHBvaW50cz0iNC42NTQwNDc5NmUtMDYgMC4wNDgyMTQxMjgzIDE1LjUwMjUwNTkgMC4wNDgyMTQxMjgzIDE1LjUwMjUwNTkgMjMuODY0NTMzNCA0LjY1NDA0Nzk2ZS0wNiAyMy44NjQ1MzM0Ij48L3BvbHlnb24+CiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMyIgcG9pbnRzPSIwLjAzMjA0MDk4MDIgMC4wNDgyMTQxMjgzIDE1LjQ4ODI0MzggMC4wNDgyMTQxMjgzIDE1LjQ4ODI0MzggMjMuODY0NTMzNCAwLjAzMjA0MDk4MDIgMjMuODY0NTMzNCI+PC9wb2x5Z29uPgogICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTUiIHBvaW50cz0iMC4wNDA5MzM3NzU0IDAuMDExNDAyOTI3NiA3LjA4NjQzMTk2IDAuMDExNDAyOTI3NiA3LjA4NjQzMTk2IDEwLjM0MDc3NTYgMC4wNDA5MzM3NzU0IDEwLjM0MDc3NTYiPjwvcG9seWdvbj4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJHcm91cCI+CiAgICAgICAgICAgIDxnIGlkPSJsb2dvIj4KICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkZpbGwtMS1DbGlwcGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hc2s+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBhdGgtMSI+PC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjM3MDgzMjkwNSwxOS41MzI2NDkyIEwxMC4zNDMwMjQ4LDEuNDkyNDY0OTUgQzExLjEwNjQ2MiwwLjExMTM3NzU0NyAxMi43OTczMTgyLC0wLjM2MTgzODc4NyAxNC4xMTk2NjgsMC40MzU1Mzc1MjYgQzE1LjQ0MjAxNzksMS4yMzI5NjIzNSAxNS44OTUwOTI1LDIuOTk4OTg2NjggMTUuMTMxNjU1Myw0LjM4MDEyMjU5IEw1LjE1OTQ2MzQsMjIuNDIwMjU4NSBDNC4zOTYwMjYyNCwyMy44MDEzOTQzIDIuNzA1MTcwMTEsMjQuMjc0NTYyMiAxLjM4MjgyMDIxLDIzLjQ3NzE4NTggQzAuMDYwNDcwMzE2NywyMi42Nzk4MDk1IC0wLjM5MjU1NzgyMiwyMC45MTM3MzY3IDAuMzcwODMyOTA1LDE5LjUzMjY0OTIgWiIgaWQ9IkZpbGwtMSIgZmlsbD0iIzFCRDE4QiIgZmlsbC1ydWxlPSJub256ZXJvIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC40MDE4ODAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJGaWxsLTQtQ2xpcHBlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay00IiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwYXRoLTMiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC40MDE3NjIyODIsMTkuNTMyNjQ5MiBMMTAuMzQ0MTg2NSwxLjQ5MjQ2NDk1IEMxMS4xMDUzNDQ3LDAuMTExMzc3NTQ3IDEyLjc5MTE5OTgsLTAuMzYxODM4Nzg3IDE0LjEwOTU1NjEsMC40MzU1Mzc1MjYgQzE1LjQyNzk1ODcsMS4yMzI5NjIzNSAxNS44Nzk2ODA4LDIuOTk4OTg2NjggMTUuMTE4NDc2Myw0LjM4MDEyMjU5IEw1LjE3NjA5ODM2LDIyLjQyMDI1ODUgQzQuNDE0OTQwMTEsMjMuODAxMzk0MyAyLjcyOTEzMTMyLDI0LjI3NDU2MjIgMS40MTA3Mjg3MywyMy40NzcxODU4IEMwLjA5MjMyNjE0ODIsMjIuNjc5ODA5NSAtMC4zNTkzNDk2NjcsMjAuOTEzNzM2NyAwLjQwMTc2MjI4MiwxOS41MzI2NDkyIFoiIGlkPSJGaWxsLTQiIGZpbGw9IiMxQkQxOEIiIGZpbGwtcnVsZT0ibm9uemVybyIgbWFzaz0idXJsKCNtYXNrLTQpIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2LjgwMzc2MCwgMTMuNTcyMjY3KSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJGaWxsLTctQ2xpcHBlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay02IiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtNSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwYXRoLTUiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy4yMTQzMDU0MywwLjAxMTQwMjkyNzYgTDAuMDQwOTMzNzc1NCw1LjU4MjUwNzQ2IEwxLjk1NzY3MDM5LDguOTQ3NTE3NSBDMi43MTY2MDk0NSwxMC4yNzk4Mzk4IDQuMzk3NDAwOTYsMTAuNzM2MzMxMyA1LjcxMTg3OTcyLDkuOTY3MTM2NjQgQzcuMDI2MzEyMyw5LjE5Nzg5NTI3IDcuNDc2NjkwMDQsNy40OTQyODc1OSA2LjcxNzc5NzE0LDYuMTYxOTY1MjIgTDMuMjE0MzA1NDMsMC4wMTE0MDI5Mjc2IFoiIGlkPSJGaWxsLTciIGZpbGw9IiMxQkQxOEIiIGZpbGwtcnVsZT0ibm9uemVybyIgbWFzaz0idXJsKCNtYXNrLTYpIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuOTA3MTU5NDYsMTAuMzQwNzc1NiBMNy4xMDkyODMyLDQuNzYzNTEzMzMgTDUuMTc1MTYxNzEsMS4zOTQ3ODM5NyBDNC40MDkzNTc0NywwLjA2MDk4ODk5OTQgMi43MTM0MDg1NCwtMC4zOTU5NjAxNDcgMS4zODcwMzkzNSwwLjM3NDAzNzgxIEMwLjA2MDY3MDE0OTUsMS4xNDQxMjk0NiAtMC4zOTM3ODE1NTgsMi44NDk2MjAxMiAwLjM3MTk3NjA4OSw0LjE4MzQxNTEgTDMuOTA3MTU5NDYsMTAuMzQwNzc1NiBaIiBpZD0iRmlsbC0xMCIgZmlsbD0iIzFCRDE4QiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==">

This repository contains a template structure to serve as a reference when porting machine learning models to [Runway](https://runwayapp.ai/). This references is written for python based models.

> If you are looking for a tutorial on how to port your own model, see: [https://docs.runwayapp.ai/#/importing](https://docs.runwayapp.ai/#/importing)

Every Runway model should have:
- An **entrypoint** with the Runway specifications. In this case, [`model.py`](model.py).
- A [`runway.yml`](runway.yml) file with meta-data.

## Entrypoint

The [entrypoint](model.py) file is the file Runway will use to query the model. This file can have any name you want, but we recommend calling it `model.py`.

### Basic Structure

```python
# Import the Runway SDK. Please install it first (pip install runway-python).
import runway

# Setup the model, initialize weights, set the configs of the model, etc.
# Every model will have a different set of configurations and requirements.
# Check https://docs.runwayapp.ai/#/python-sdk to see a complete list of supported configs.
# The setup function should return the model ready to be used.
@runway.setup(options={'truncation': 'float', 'seed': 'integer'})
def setup(opts):
    model = init_model(opts)
    return model

# Every model needs to have at least one command. Every command allows to send inputs and process outputs. 
# Check https://docs.runwayapp.ai/#/python-sdk to see a complete list of supported inputs and outputs.
@runway.command(name='generate', inputs={'caption': 'text'}, outputs={'result': 'image'})
def generate(model, inputs):
    output = model.run_on_input(inp) # Placeholder
    return {
        'image': output
    }
```

## runway.yml

The Runway `runway.yml` contains all related meta-data of the model as well as the instructions and build process. The bare minimum requirements for a model using CUDA is the following:

```yaml
python: 3.6
cuda: 9.2
files:
  ignore:
    - tests/*
```